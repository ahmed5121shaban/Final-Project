<section>
  <div class="container py-5">
    <div class="row d-flex justify-content-center">
      <div class="col-md-10 col-lg-8 col-xl-6">
        <!-- Chat Card -->
        <div class="card" id="chat2">
          <div class="card-header d-flex justify-content-between align-items-center p-3">
            <h5 class="mb-0">Chat with Seller</h5>
          </div>
          <div class="card-body" style="position: relative; height: 400px; overflow-y: auto;">
            <!-- Chat Messages -->
            <div *ngFor="let message of messages" class="d-flex flex-row" [ngClass]="{'justify-content-start': message.sender === 'buyer', 'justify-content-end': message.sender === 'seller'}">
              <img *ngIf="message.sender === 'buyer'" src="https://mdbcdn.b-cdn.net/img/Photos/Avatars/avatar-1.webp" alt="avatar" class="chat-avatar rounded-circle d-flex align-self-start me-3 shadow-1-strong">
              <img *ngIf="message.sender === 'seller'" src="https://mdbcdn.b-cdn.net/img/Photos/Avatars/avatar-2.webp" alt="avatar" class="chat-avatar rounded-circle d-flex align-self-start me-3">
              <div>
                <p class="small p-2 mb-1 rounded-3" [ngClass]="{'bg-body-custom': message.sender === 'buyer', 'bg-primary-custom': message.sender === 'seller'}" [innerHTML]="message.text"></p>
                <p class="small mb-3 rounded-3 text-muted" [ngClass]="{'text-start': message.sender === 'buyer', 'text-end': message.sender === 'seller'}">
                  {{ message.day }} {{ message.date }} at {{ message.time }}
                </p>
              </div>
            </div>
          </div>
          <div class="card-footer text-muted d-flex justify-content-start align-items-center p-3">
            <div class="d-flex align-items-center me-2">
              <input id="fileInput" type="file" (change)="onFileChange($event)" class="d-none" />
              <label for="fileInput" class="btn btn-outline-secondary btn-sm me-2">
                <i class="fas fa-paperclip"></i>
              </label>
            </div>
            <textarea [(ngModel)]="newMessage" class="form-control form-control-lg me-2" rows="2" placeholder="Type your message..." (keydown.enter)="sendMessage()"></textarea>
            <button type="button" class="btn btn-primary btn-sm" (click)="sendMessage()"><i class="fas fa-paper-plane"></i></button>
            <button type="button" class="btn btn-outline-secondary btn-sm ms-2 " (click)="toggleEmojiPicker()"><i class="fas fa-smile"></i></button>
            <div *ngIf="showEmojiPicker" class="emoji-picker">
              <button *ngFor="let emoji of emojis" (click)="selectEmoji(emoji)" class="btn btn-light btn-sm">{{ emoji }}</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
